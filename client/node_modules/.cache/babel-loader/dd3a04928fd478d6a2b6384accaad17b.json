{"ast":null,"code":"/* eslint-disable no-underscore-dangle */\n'use strict';\n\nconst {\n  Transform\n} = require('stream');\n\nclass JSONParser extends Transform {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super({\n      readableObjectMode: true\n    });\n    this.chunks = [];\n    this.globalOptions = { ...options\n    };\n  }\n\n  _transform(chunk, encoding, callback) {\n    this.chunks.push(String(chunk)); // todo consider using a string decoder\n\n    callback();\n  }\n\n  _flush(callback) {\n    try {\n      const fields = JSON.parse(this.chunks.join(''));\n      Object.keys(fields).forEach(key => {\n        const value = fields[key];\n        this.push({\n          key,\n          value\n        });\n      });\n    } catch (e) {\n      callback(e);\n      return;\n    }\n\n    this.chunks = null;\n    callback();\n  }\n\n}\n\nmodule.exports = JSONParser;","map":{"version":3,"names":["Transform","require","JSONParser","constructor","options","readableObjectMode","chunks","globalOptions","_transform","chunk","encoding","callback","push","String","_flush","fields","JSON","parse","join","Object","keys","forEach","key","value","e","module","exports"],"sources":["C:/Users/killua/local/pc/Bureau/SMQ-ROYAL-AIR-MAROC/client/node_modules/formidable/src/parsers/JSON.js"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\n\n'use strict';\n\nconst { Transform } = require('stream');\n\nclass JSONParser extends Transform {\n  constructor(options = {}) {\n    super({ readableObjectMode: true });\n    this.chunks = [];\n    this.globalOptions = { ...options };\n  }\n\n  _transform(chunk, encoding, callback) {\n    this.chunks.push(String(chunk)); // todo consider using a string decoder\n    callback();\n  }\n\n  _flush(callback) {\n    try {\n      const fields = JSON.parse(this.chunks.join(''));\n      Object.keys(fields).forEach((key) => {\n        const value = fields[key];\n        this.push({ key, value });\n      });\n    } catch (e) {\n      callback(e);\n      return;\n    }\n    this.chunks = null;\n    callback();\n  }\n}\n\nmodule.exports = JSONParser;\n"],"mappings":"AAAA;AAEA;;AAEA,MAAM;EAAEA;AAAF,IAAgBC,OAAO,CAAC,QAAD,CAA7B;;AAEA,MAAMC,UAAN,SAAyBF,SAAzB,CAAmC;EACjCG,WAAW,GAAe;IAAA,IAAdC,OAAc,uEAAJ,EAAI;IACxB,MAAM;MAAEC,kBAAkB,EAAE;IAAtB,CAAN;IACA,KAAKC,MAAL,GAAc,EAAd;IACA,KAAKC,aAAL,GAAqB,EAAE,GAAGH;IAAL,CAArB;EACD;;EAEDI,UAAU,CAACC,KAAD,EAAQC,QAAR,EAAkBC,QAAlB,EAA4B;IACpC,KAAKL,MAAL,CAAYM,IAAZ,CAAiBC,MAAM,CAACJ,KAAD,CAAvB,EADoC,CACH;;IACjCE,QAAQ;EACT;;EAEDG,MAAM,CAACH,QAAD,EAAW;IACf,IAAI;MACF,MAAMI,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAW,KAAKX,MAAL,CAAYY,IAAZ,CAAiB,EAAjB,CAAX,CAAf;MACAC,MAAM,CAACC,IAAP,CAAYL,MAAZ,EAAoBM,OAApB,CAA6BC,GAAD,IAAS;QACnC,MAAMC,KAAK,GAAGR,MAAM,CAACO,GAAD,CAApB;QACA,KAAKV,IAAL,CAAU;UAAEU,GAAF;UAAOC;QAAP,CAAV;MACD,CAHD;IAID,CAND,CAME,OAAOC,CAAP,EAAU;MACVb,QAAQ,CAACa,CAAD,CAAR;MACA;IACD;;IACD,KAAKlB,MAAL,GAAc,IAAd;IACAK,QAAQ;EACT;;AAzBgC;;AA4BnCc,MAAM,CAACC,OAAP,GAAiBxB,UAAjB"},"metadata":{},"sourceType":"script"}